@{
    ViewData["Title"] = "Odabir sjedišta";
    var projekcija = ViewBag.Projekcija as Cineverse.Models.Projekcija;
    var dvorana = ViewBag.Dvorana as Cineverse.Models.Dvorana;
    var film = ViewBag.Film as Cineverse.Models.Film;
    var zauzeta = ViewBag.Zauzeta as List<int>;
    var sjedista = ViewBag.Sjedista as List<Cineverse.Models.Sjediste>;
    var maxRed = sjedista.Max(s => s.Red);
}

<!-- Dodani stilovi -->
<style>
    .sjediste-label {
        display: inline-block;
        width: 25px;
        height: 25px;
        margin: 2px;
        background: #f5f5f5;
        text-align: center;
        line-height: 25px;
        cursor: pointer;
        border: 1px solid #ddd;
        color: dimgray !important; 
        transition: background 0.2s, color 0.2s;
    }

    input[type="checkbox"]:checked + .sjediste-label {
        background-color: orange;
        color: black !important;
        border-color: #aaa;
    }
</style>


<div style="max-width: 600px; margin: 20px auto; font-family: Arial, sans-serif;">
    <h3>@film.NazivFilma</h3>
    <p>Dvorana: @dvorana.NazivDvorane</p>

    <form method="post" action="/rezervacija/potvrda">
        <input type="hidden" name="projekcijaId" value="@projekcija.Id" />

        <div style="text-align: center; margin-bottom: 20px;">
            @for (int red = 1; red <= maxRed; red++)
            {
                <div style="margin-bottom: 8px;">
                    <span style="display: inline-block; width: 25px; text-align: right; margin-right: 5px;">@red.</span>

                    @foreach (var sjediste in sjedista.Where(s => s.Red == red).OrderBy(s => s.Kolona))
                    {
                        if (zauzeta.Contains(sjediste.Id))
                        {
                            <span style="display: inline-block; width: 25px; height: 25px; margin: 2px; background: #eee; text-align: center; line-height: 25px;">❌</span>
                        }
                        else
                        {
                            <input type="checkbox"
                                   name="odabranaSjedista"
                                   value="@sjediste.Id"
                                   id="sjediste-@sjediste.Id"
                                   style="display: none;" />
                            <label for="sjediste-@sjediste.Id" class="sjediste-label">
                                @sjediste.Kolona
                            </label>
                        }
                    }
                </div>
            }
        </div>

        <div style="text-align: center; margin-top: 20px;">
            <button type="submit" style="padding: 8px 20px; background: darkorange; color: white; border: none; cursor: pointer;">Rezerviši</button>
        </div>
    </form>
</div>
